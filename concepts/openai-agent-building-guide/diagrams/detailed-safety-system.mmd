---
title: "Detailed Safety System"
---
flowchart TD
    %% Input Layer
    Input[ðŸ‘¤ User Input] --> InputLayer[ðŸ›¡ï¸ Input Validation Layer]
    
    %% Input validation details
    InputLayer --> Relevance{ðŸ“‹ Relevance?}
    InputLayer --> Safety{ðŸ”’ Safety?}
    InputLayer --> PII{ðŸ†” PII Check?}
    
    Relevance -->|âŒ| Block1[ðŸš« Irrelevant]
    Safety -->|âŒ| Block2[ðŸš« Unsafe]
    PII -->|âŒ| Block3[ðŸš« PII Risk]
    
    Relevance -->|âœ…| Approved1[âœ…]
    Safety -->|âœ…| Approved1
    PII -->|âœ…| Approved1
    
    %% Processing Layer
    Approved1 --> Processing[ðŸ¤– Agent Processing]
    Processing --> ToolLayer[ðŸ› ï¸ Tool Safety Layer]
    
    %% Tool safety details
    ToolLayer --> RiskCheck{âš–ï¸ Risk Level?}
    RiskCheck -->|ðŸŸ¢ Low| AutoExecute[âœ… Auto Execute]
    RiskCheck -->|ðŸŸ¡ Medium| HumanReview[ðŸ‘¥ Human Review]
    RiskCheck -->|ðŸ”´ High| Block4[ðŸš« High Risk Block]
    
    HumanReview -->|âœ… Approved| AutoExecute
    HumanReview -->|âŒ Denied| Block4
    
    %% Output Layer
    AutoExecute --> OutputLayer[ðŸ“¤ Output Validation]
    OutputLayer --> ContentCheck{ðŸ“‹ Content OK?}
    ContentCheck -->|âŒ| Block5[ðŸš« Invalid Output]
    ContentCheck -->|âœ…| FinalResponse[ðŸ“‹ Safe Response]
    
    %% Human Oversight
    HumanOversight[ðŸ‘¥ Human Oversight] -.-> Processing
    HumanOversight -.-> ToolLayer
    HumanOversight -.-> OutputLayer
    
    %% Styling
    classDef inputClass fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef safetyClass fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    classDef blockClass fill:#ffebee,stroke:#c62828,stroke-width:2px
    classDef processClass fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    classDef humanClass fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    
    class Input,FinalResponse inputClass
    class InputLayer,ToolLayer,OutputLayer,Relevance,Safety,PII,RiskCheck,ContentCheck,AutoExecute safetyClass
    class Block1,Block2,Block3,Block4,Block5 blockClass
    class Processing,Approved1 processClass
    class HumanReview,HumanOversight humanClass
